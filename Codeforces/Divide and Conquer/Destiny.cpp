#include<bits/stdc++.h>
using namespace std; 
#define fi first
#define se second
#define pb push_back
#define eb emplace_back
#define umap unordered_map
#define prq priority_queue
#define vect vector
#define rs resize
#define bend(v) v.begin(),v.end()
#define pob pop_back
#define pof pop_front
#define lwb lower_bound
#define upb upper_bound
#define pii pair<int,int>
#define nextl cout << '\n'
#define el '\n'
#define deb cout<<"\nok\n";return 
#define ll long long
#define int long long
#define dbl long double
#define popcnt __builtin_popcount
#define ctz __builtin_ctz
#define FILE "ellencute"
 
const ll INF=902337203695775807, N=3e5+69, MOD=1e9+7;    
 
void ffopen(){
    if(fopen(FILE".inp", "r")){
        freopen(FILE".inp", "r", stdin);
        freopen(FILE".out", "w", stdout);
    }else if(fopen("ellencute.inp", "r")){
        freopen("ellencute.inp", "r", stdin);
        freopen("ellencute.out", "w", stdout);
    }
}

int pm(int a,const int b=1e9+7){return ((a%b)+b)%b;}
int sq(int x){return x*x;}
ll __lcm(ll a, ll b, const ll lim=LLONG_MAX){
    if(a == -1 || b == -1)return -1;
    ll g = __gcd(a,b);
    if(b/g > lim/a)return -1;
    return (a/g)*b;
}

struct query{
    int l, r, k, id;
    bool operator < (const query& o) const{
        return r < o.r;
    }
};

struct number{
    int freq, val;
    bool operator < (const number& o) const{
        return freq != o.freq ? freq < o.freq : val > o.val;
    }
};

int n, q, ANS[N], a[N], cnt[N];
vect<int> E[N];
vect<number> L[N];
set<number> ms;

bool ok(number n, query que){
    int l = que.l, r = que.r;
    int be = lwb(bend(E[n.val]), l) - E[n.val].begin();
    int ed = upb(bend(E[n.val]), r) - E[n.val].begin() - 1;
    return (ed - be + 1) * que.k > (r-l+1);
}

void dnc(int l, int r, vect<query> que){
    if(l == r){
        for(auto& i : que) ANS[i.id] = a[l];
        return;
    }

    int mid = (l+r)/2;


    for(int i=mid;i>=l;i--){

        number cur = {cnt[a[i]], a[i]};
        if(ms.find(cur) != ms.end()) ms.erase(cur);
        cur.freq = cnt[a[i]] = cnt[a[i]] + 1;
        ms.insert(cur);
        while(ms.size() > 5) ms.erase(ms.begin());
        
        for(auto& j : ms) L[i].eb(j);
    }

    ms.clear();    
    for(int i=mid;i>=l;i--) cnt[a[i]] = 0;

    int iq = 0;
    vect<query> ql, qr;
    
    for(int i=mid+1;r>=i;i++){


        number cur = {cnt[a[i]], a[i]};
        if(ms.find(cur) != ms.end()) ms.erase(cur);
        cur.freq = cnt[a[i]] = cnt[a[i]] + 1;
        ms.insert(cur);
        while(ms.size() > 5) ms.erase(ms.begin());




        while(iq<que.size() && que[iq].r <= i){

            if(que[iq].l <= mid && mid < que[iq].r){

                int ans = 2e9+69;
                for(auto& j : ms) if(ok(j, que[iq])) ans = min(ans, j.val);
                for(auto& j : L[que[iq].l]) if(ok(j, que[iq])) ans = min(ans, j.val);
                ANS[que[iq].id] = ans > 2e9 ? -1 : ans; 

            } else{
                if(mid >= que[iq].r) ql.eb(que[iq]);
                else qr.eb(que[iq]);
            }

            iq++;
        }
    }

    ms.clear();
    for(int i=l;r>=i;i++) L[i].clear(), cnt[a[i]] = 0;

    dnc(l, mid, ql);
    dnc(mid+1, r, qr);
}   

void sol(){
    cin >> n >> q;
    for(int i=0;n>i;i++){
        cin >> a[i];
        E[a[i]].eb(i);
    }

    vect<query> Q(q);
    for(int i=0;q>i;i++){
        Q[i].id = i;
        cin >> Q[i].l >> Q[i].r >> Q[i].k;
        Q[i].l--;Q[i].r--;
    }

    sort(bend(Q));
    dnc(0, n-1, Q);

    for(int i=0;q>i;i++) cout << ANS[i] << el;
}

signed main(){
    ios_base::sync_with_stdio(false);
    cin.tie(NULL);
    ffopen();
    int t=1;
    //cin >> t;
    while(t--)sol();
}
/*
                                                     ...-%%%%%%%%%%%...                               
                                             .:**#%=%%%%%+........-%%%%. .                            
                                        .%%%%%%=-..%#.               .#%%.                            
                                      %%%+..      .:                    *%%.                          
                                    .%%.          :.                     :%%%%%:.                     
                                   .%%.     ...  .:                    ::     .=%%%.                  
                                 ..%%.    #%#:%. :                   :..          =%%.                
                                %%+..:  .%*::::%-::::::-::::::..   .:-%%%%.        .*%%..             
                              .%#     :.%:::::::%%%%%%%%%%%%%+...%%%+::::%#.         .%%.             
                             .%%.  ..:.%=::::*%#***#%::::::::%%%%=:::::::%%.          .%%.            
                             =%%%...-%%%:::*%********%:::%%%****%::::::::%%            .%-            
                            .%::::%%***%=:%%**********%%********%:::::::=%-:.          .%..           
                            #%:::%#*****%%**********************%:::+%%%*%%-.:      .::..%%.          
                           .%%::%%*****==**==*****#************#%%%%#******%%..::::..     .%%.        
                         .%%#%+%%***************##*+=+*==********************%%.:.         .%%        
                        .%%***%%****************#**==**==******==**+=+********%%%%%%%%%     %%.       
                      .#%#*********************%%**************++************%%::::::%*   .%%%.       
                     .%%***************#*****%%%****************************%%::::::%% .-%%%.         
                    .#%***************#****%%--%*********%*****************%#::::-%%%%%%%%%%.         
                    .%%**************#**%%%----%********%%**************#***#%%%#**%#******%*         
                   .%%**************#%%%--.....%%*******%%**************#**********#%******%%.        
                   .%%*************%%...........%%******%-%*************#***********%%*****%%.        
                   .%%*************%%...%%%%%.....%%%%%%%.=%%%%%%%%##****#****##::::+%%*****%#        
                   .%%************%%...%.   %%.................%%%%-.....%*****#*****%%*****%%        
                   .#%#*#****#****%%:::%-  %%.................%.   #-....%*****#*#####%#****%%.       
                    .%%##****%%%**%%:::::##...................%=  .%+:::%#*****#:####*%%****%%.       
                     .+%%#**%%.#%%%%::::::........###+.:*##-....%%%:::::%*****##******%%****%%-       
                       ..%%*%%.......:::.......##..#*...#+..#*....:::::%******#*****##%%*****%%.      
                        .%%%%%................#-##=--##+-+###-#....:::%******#:###*::%%#*****%%.      
                      .%%****%%..............#----------------=*...#%#****##**##::#**%%*******%%.     
                      .%%%%%*=+%%*...........#-----------------#.....#%%%%%%+:##*##:*%%*******%%%.    
                        ..:*%====%%%%........#-----------------#:.........%#********%%*****%%%%%%.    
                          .%%=======*%%%%%%%.%%+----#-%------%%#.......%%%%::::::::%%==***#%###%%.    
                         ..%%=============+%%-:#%%%%-::%%%%%%::%%%%%%%%%=%%*******%%=====**%%###%%..  
                        -%%%%%%%%%%%%%%%%+%.%+:+%::%::::%::%:::%%#%... .%%******%%%========#%####%%.  
                      .%%++#############%%# ..%%.**%%#%%%%%%%#%***%.  :%%*****%%%=+%%%%%%%%%%#####%%. 
                    .%%++++*############*++%   .%************#****%.  #%*%%%%+++%%%%###############%%.
         .+%%%%%%%%%%####+##########*+++++%%. .%**#**********#****%   %%**%%%++++###################%:
      =%%%%######################++++++++%%*%.-%%#***********#****% .%****%%+++++###################%%
   .%%%#######################*%%%%%%%%.%%*#%+%###################%.%%***%%%+++++###################%%
  *%%######################+#%%++++++%*. =%*%. .:%%%%########%%%%%%%%%#*#%.%%++#####################%%
.%%%#####################%%%%%+++++++%-  %*#%%.          .%%%*++++++*%%%....%%#####################%%*
%%######%%%%%#%%%%%######%%.%*+++++++%.  %****#.        .%%+++*+++++*++%%...=%%###################%%%.
%%%%%%%%#-=##%...%%######%%.%%+++++++%%..*%***#%%%%%. ..%+++++++++++++++%%...%%##################%%%. 
.%:.             .#%#####%%.%%+++++++++%. %*********%%%%%++++++++++++++++%%...%%##############%%%%..  
                  :%#####%% .%%+++++++%%  .%%**********%%++++++++++++++++%%.....%#########%%%%%% .    
                 *%#####%%.  .%%+++++++%%:. .%%********%%++++++++++++++++%%....%%%%%%%%%%%%*..        
                 .%%##%%%     .%%*+++++++%%. ..#%%%#****%%+++++++++++++++%%%%%% . .....               
                 %%#%%%.       .:%%%%%%%%%%%...-%. ......%%+++++++++++++%%.                           
               ..%%%.              ...     .%%%#%%%=:#%%%%%%%%*++++++%%%#                             
                                                 .-%%+.  ... .%%%%%%%:.  
*/